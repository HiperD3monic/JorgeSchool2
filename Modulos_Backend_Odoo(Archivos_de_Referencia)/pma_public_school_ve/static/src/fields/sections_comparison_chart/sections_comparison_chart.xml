<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="school.SectionsComparisonChart">
        <div class="o_sections_comparison_chart">
            <t t-if="hasData">
                <div class="row g-3">
                    <t t-foreach="sections" t-as="section" t-key="section.section_id">
                        <div class="col-lg-4 col-md-6 col-12">
                            <div t-attf-class="card h-100 border-start border-4 {{ getLevelBorderClass(section.type) }}"
                                 t-on-click="() => this.onSectionClick(section)" style="cursor: pointer;">
                                <div class="card-body p-3">
                                    <div class="d-flex justify-content-between align-items-start mb-2">
                                        <div>
                                            <span class="badge mb-1" t-att-class="getLevelBadgeClass(section.type)">
                                                <t t-esc="section.type_name"/>
                                            </span>
                                            <!-- FIX: Eliminado text-truncate y max-width:150px para que
                                                 los nombres largos de menciÃ³n se muestren completos -->
                                            <h6 class="mb-0 fw-bold" t-att-title="section.section_name">
                                                <t t-esc="section.section_name"/>
                                            </h6>
                                        </div>
                                        <!-- Show literal for Primaria, numeric for others -->
                                        <t t-if="section.type === 'primary'">
                                            <span t-attf-class="badge fs-4 px-2 {{ getLiteralBadgeClass(getLiteralFromAverage(section.average)) }}">
                                                <t t-esc="getLiteralFromAverage(section.average)"/>
                                            </span>
                                        </t>
                                        <t t-else="">
                                            <span class="badge bg-light text-dark border fs-5 px-2">
                                                <t t-esc="section.average"/>
                                            </span>
                                        </t>
                                    </div>
                                    <div class="d-flex justify-content-between text-muted small">
                                        <span><i class="fa fa-users me-1"/><t t-esc="section.total_students"/> est.</span>
                                        <span class="text-success"><i class="fa fa-check me-1"/><t t-esc="section.approved_students"/> apr.</span>
                                    </div>
                                    <div class="progress mt-2" style="height: 4px;">
                                        <div t-attf-class="progress-bar {{ section.approval_rate >= 80 ? 'bg-success' : section.approval_rate >= 60 ? 'bg-warning' : 'bg-danger' }}"
                                             t-att-style="'width: ' + section.approval_rate + '%'"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </div>
            </t>
            <t t-else="">
                <div class="alert alert-info text-center py-3">
                    <i class="fa fa-info-circle me-2"/>No hay datos de secciones.
                </div>
            </t>
        </div>
    </t>
</templates>
