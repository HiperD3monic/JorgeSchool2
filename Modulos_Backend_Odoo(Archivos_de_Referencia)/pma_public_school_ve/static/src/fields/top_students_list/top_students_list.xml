<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="school.TopStudentsList">
        <div class="o_top_students_list">
            <t t-if="hasData">
                <div class="row g-3">
                    <t t-foreach="levelGroups" t-as="group" t-key="group.level">
                        <div class="col-lg-4 col-md-6 col-12">
                            <div class="card section-card h-100">
                                <div class="card-header py-2">
                                    <h6 class="mb-0 fw-bold">
                                        <i t-attf-class="fa {{ group.icon }} {{ group.colorClass }} me-2"/>
                                        <t t-esc="group.name"/>
                                    </h6>
                                </div>
                                <ul class="list-group list-group-flush">
                                    <t t-foreach="group.students" t-as="student" t-key="student.student_id">
                                        <li t-attf-class="list-group-item student-item {{ getPositionClass(student_index) }}"
                                            t-on-click="() => this.onStudentClick(student.student_id)"
                                            style="cursor: pointer;">
                                            <div class="d-flex align-items-center">
                                                <span class="position-medal me-2"><t t-esc="getMedalIcon(student_index)"/></span>
                                                <div t-attf-class="student-avatar me-2 {{ getAvatarClass(student_index) }}"
                                                     t-att-style="'background-color: ' + getAvatarColor(student.student_name)">
                                                    <t t-esc="getInitials(student.student_name)"/>
                                                </div>
                                                <div class="flex-grow-1 overflow-hidden">
                                                    <span class="d-block fw-medium text-truncate-1" t-att-title="student.student_name">
                                                        <t t-esc="student.student_name"/>
                                                    </span>
                                                    <small class="text-muted"><t t-esc="student.section"/></small>
                                                </div>
                                                <!-- Display Literal or Numeric -->
                                                <t t-if="student.use_literal">
                                                    <span t-attf-class="badge literal-{{ student.literal_average }} fs-5 px-2">
                                                        <t t-esc="student.literal_average"/>
                                                    </span>
                                                </t>
                                                <t t-else="">
                                                    <span t-attf-class="badge {{ getGradeBadgeClass(student.average) }} fs-6 px-2">
                                                        <t t-esc="student.average"/>
                                                    </span>
                                                </t>
                                            </div>
                                        </li>
                                    </t>
                                </ul>
                            </div>
                        </div>
                    </t>
                </div>
            </t>
            <t t-else="">
                <div class="alert alert-info text-center py-4">
                    <i class="fa fa-info-circle fa-2x mb-2"/>
                    <p class="mb-0">No hay datos de mejores estudiantes disponibles.</p>
                </div>
            </t>
        </div>
    </t>
</templates>
