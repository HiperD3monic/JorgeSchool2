<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="school.EvaluationsStatsWidget">
        <div class="o_evaluations_stats_widget">
            <t t-if="stats.total and stats.total > 0">
                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="card bg-primary text-white">
                            <div class="card-body text-center">
                                <h2 class="mb-0"><t t-esc="stats.total"/></h2>
                                <p class="mb-0">Total Evaluaciones</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card bg-success text-white">
                            <div class="card-body text-center">
                                <h2 class="mb-0"><t t-esc="stats.qualified"/></h2>
                                <p class="mb-0">Calificadas</p>
                                <small><t t-esc="getPercentage(stats.qualified, stats.total)"/>%</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card bg-warning text-white">
                            <div class="card-body text-center">
                                <h2 class="mb-0"><t t-esc="stats.partial"/></h2>
                                <p class="mb-0">Parciales</p>
                                <small><t t-esc="getPercentage(stats.partial, stats.total)"/>%</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card bg-secondary text-white">
                            <div class="card-body text-center">
                                <h2 class="mb-0"><t t-esc="stats.draft"/></h2>
                                <p class="mb-0">Borrador</p>
                                <small><t t-esc="getPercentage(stats.draft, stats.total)"/>%</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <h6>Distribuci√≥n por Nivel</h6>
                        <div class="progress" style="height: 30px;">
                            <div class="progress-bar bg-warning" 
                                 role="progressbar" 
                                 t-att-style="'width: ' + getPercentage(stats.by_type.secundary, stats.total) + '%'"
                                 t-att-aria-valuenow="stats.by_type.secundary">
                                <strong>Media: <t t-esc="stats.by_type.secundary"/></strong>
                            </div>
                            <div class="progress-bar bg-success" 
                                 role="progressbar" 
                                 t-att-style="'width: ' + getPercentage(stats.by_type.primary, stats.total) + '%'"
                                 t-att-aria-valuenow="stats.by_type.primary">
                                <strong>Primaria: <t t-esc="stats.by_type.primary"/></strong>
                            </div>
                            <div class="progress-bar bg-info" 
                                 role="progressbar" 
                                 t-att-style="'width: ' + getPercentage(stats.by_type.pre, stats.total) + '%'"
                                 t-att-aria-valuenow="stats.by_type.pre">
                                <strong>Pre: <t t-esc="stats.by_type.pre"/></strong>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
            <div t-else="" class="alert alert-info text-center">
                <i class="fa fa-info-circle me-2"/>
                No hay evaluaciones registradas
            </div>
        </div>
    </t>
</templates>
