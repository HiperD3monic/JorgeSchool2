<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="school_register_hr_employee_view_kanban" model="ir.ui.view">
        <field name="name">school.register.hr.employee.view.kanban</field>
        <field name="model">hr.employee</field>
        <field name="arch" type="xml">
            <kanban>
                <field name="show_hr_icon_display"/>
                    <field name="image_128"/>
                    <field name="company_id"/>
                    <templates>
                        <t t-name="card" class="flex-row">
                            <aside class="o_kanban_aside_full">
                                <t t-if="record.image_1024.raw_value">
                                    <field name="image_1024" widget="background_image" options="{'zoom': true, 'zoom_delay': 1000, 'preview_image':'image_128'}" class="d-block position-relative"/>
                                </t>
                                <t t-elif="record.image_128.raw_value">
                                    <field name="avatar_128" widget="background_image" options="{'zoom': true, 'zoom_delay': 1000}" class="d-block position-relative"/>
                                </t>
                                <div t-else="" class="d-flex align-items-center justify-content-center bg-100 bg-gradient">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-75 h-75 opacity-50" viewBox="0 0 20 20">
                                        <g fill="currentColor">
                                            <path d="M 10 11 C 4.08 11 2 14 2 16 L 2 19 L 18 19 L 18 16 C 18 14 15.92 11 10 11 Z"/>
                                            <circle cx="10" cy="5.5" r="4.5"/>
                                        </g>
                                    </svg>
                                </div>
                            </aside>
                            <main class="ms-2">
                                <div>
                                    <div t-if="record.show_hr_icon_display.raw_value" class="float-end">
                                        <field name="hr_icon_display" widget="hr_presence_status"/>
                                    </div>
                                    <field class="fw-bold fs-5" name="name" placeholder="Employee's Name"/>
                                </div>
                                <div t-if="record.job_title.raw_value" class="text-truncate">
                                    <i class="fa fa-fw me-2 fa-suitcase text-primary" title="Job Position"/>
                                    <field name="job_title"/>
                                </div>
                                <div t-if="record.work_email.raw_value" class="text-truncate">
                                    <i class="fa fa-fw me-2 fa-envelope text-primary" title="Email"/>
                                    <field name="work_email"/>
                                </div>
                                <div t-if="record.work_phone.raw_value">
                                    <i class="fa fa-fw me-2 fa-phone text-primary" title="Phone"/>
                                    <field name="work_phone"/>
                                </div>
                                <div t-if="record.contract_date_start.raw_value" groups="hr.group_hr_manager" t-att-class="{'text-danger': record.contract_date_end.raw_value &lt; luxon.DateTime.now().toISO()}">
                                    <i class="fa fa-fw me-2 fa-briefcase text-primary" title="Contract"/>
                                    <field name="contract_date_start"/>
                                    <span t-if="record.contract_date_end.raw_value"> - </span>
                                    <field t-if="record.contract_date_end.raw_value" name="contract_date_end"/>
                                </div>
                                <div invisible="birthday_public_display_string == 'hidden'">
                                    <i class="fa fa-fw me-2 fa-birthday-cake text-primary" title="Birthday"/>
                                    <field name="birthday_public_display_string"/>
                                </div>
                                <field name="employee_properties" widget="properties"/>
                                <field class="hr_tags" name="category_ids" widget="many2many_tags" options="{'color_field': 'color'}" optional="hide"/>
                                <!-- <footer class="py-0">
                                    <div class="d-flex ms-auto">
                                        <field name="user_id" widget="many2one_avatar_user" readonly="1" class="mb-1 ms-2"/>
                                        <field name="activity_ids" widget="kanban_activity" class="m-1 ms-2"/>
                                    </div>
                                </footer> -->
                            </main>
                        </t>
                    </templates>
            </kanban>
        </field>
    </record>

    

    <record id="school_register_hr_employee_view_form" model="ir.ui.view">
        <field name="name">hr.employee.view.form.inherit</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <xpath expr="//h5[4]" position="after">
                <h5>
                    <!-- <i class="fa fa-tags fa-fw me-1 text-primary" title="Tags"/> -->
                    <field name="school_employee_type"
                        placeholder="Tipo de trabajador estudiantil" groups="hr.group_hr_user"/>
                </h5>
            </xpath>
            <xpath expr="//notebook" position="inside">
                <page name="subjects" string="Materias" invisible="school_employee_type != 'docente'">
                    <field name="subject_ids" nolabel="1" colspan="2" readonly="1">
                        <list editable="top" create="0">
                            <field name="name"/>
                        </list>
                    </field>
                </page>
            </xpath>
        </field>
    </record>

    
    <record id="school_register_hr_emplayee_action" model="ir.actions.act_window">
        <field name="name">Empleados</field>
        <field name="res_model">hr.employee</field>
        <field name="view_mode">kanban,form</field>
        <field name="view_ids" eval="[(5, 0, 0), 
            (0, 0, {'view_mode': 'kanban', 'view_id': ref('school_register_hr_employee_view_kanban')}), 
            (0, 0, {'view_mode': 'form', 'view_id': ref('hr.view_employee_form')})
        ]"/>
        <field name="context">{}</field>
    </record>
    

</odoo>
